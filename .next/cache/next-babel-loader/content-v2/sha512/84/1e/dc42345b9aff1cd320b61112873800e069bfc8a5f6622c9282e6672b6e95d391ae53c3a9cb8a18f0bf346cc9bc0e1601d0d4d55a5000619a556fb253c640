{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useRef } from \"react\";\nimport firebase from '../../firebase';\nimport LoginLayout from \"layouts/LoginLayout.js\";\nexport default function PatientLogin() {\n  const {\n    0: phoneNumber,\n    1: setPhoneNumber\n  } = useState('');\n  const {\n    0: otp,\n    1: setOtp\n  } = useState('');\n  const capthaRef = useRef();\n\n  const configureCaptha = () => {\n    if (window.recaptchaVerifier) {\n      capthaRef.current.innerHTML = `<div id=\"sign-in-button\" ></div>`;\n    }\n\n    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('sign-in-button', {\n      'size': 'invisible',\n      'callback': response => {\n        console.log(\"captha verified\");\n      },\n      defaultCountry: \"IN\"\n    });\n  };\n\n  const signInPatient = () => {\n    configureCaptha();\n    const appVerifier = window.recaptchaVerifier;\n    const phoneNum = \"+91\" + phoneNumber;\n    firebase.auth().signInWithPhoneNumber(phoneNum, appVerifier).then(confirmationResult => {\n      window.confirmationResult = confirmationResult;\n    }).catch(error => {\n      console.log(\"sms not sent\", error.message);\n      window.recaptchaVerifier.reset();\n    });\n  };\n\n  const onSubmitOtp = () => {\n    const code = otp;\n    window.confirmationResult.confirm(code).then(result => {\n      const user = result.user;\n      console.log(JSON.stringify(user));\n    }).catch(error => {\n      console.log(\"otp invalid\", error.message);\n      window.recaptchaVerifier.reset();\n      window.recaptchaVerifier.clear();\n    });\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container mx-auto px-4 h-full\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"flex content-center items-center justify-center h-full\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"w-full lg:w-6/12 px-4\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-blueGray-200 border-0\",\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: \"rounded-t mb-0 px-6 py-6\",\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: \"text-center mb-3\",\n                children: /*#__PURE__*/_jsx(\"h6\", {\n                  className: \"text-blueGray-500 text-sm font-bold\",\n                  children: \"Book an Appointment\"\n                })\n              }), /*#__PURE__*/_jsx(\"hr\", {\n                className: \"mt-6 border-b-1 border-blueGray-300\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: \"flex-auto px-4 lg:px-10 py-10 pt-0\",\n              children: /*#__PURE__*/_jsxs(\"form\", {\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  ref: capthaRef,\n                  children: /*#__PURE__*/_jsx(\"div\", {\n                    id: \"sign-in-button\"\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"relative w-full mb-3\",\n                  children: [/*#__PURE__*/_jsx(\"label\", {\n                    className: \"block uppercase text-blueGray-600 text-xs font-bold mb-2\",\n                    children: \"Full Name\"\n                  }), /*#__PURE__*/_jsx(\"input\", {\n                    type: \"text\",\n                    className: \"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150\",\n                    placeholder: \"Name\"\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"relative w-full mb-3\",\n                  children: [/*#__PURE__*/_jsx(\"label\", {\n                    className: \"block uppercase text-blueGray-600 text-xs font-bold mb-2\",\n                    children: \"Phone Number\"\n                  }), /*#__PURE__*/_jsx(\"input\", {\n                    type: \"number\",\n                    value: phoneNumber,\n                    onChange: e => setPhoneNumber(e.target.value),\n                    className: \"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150\",\n                    placeholder: \"Phone Number\"\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"text-center mt-6\",\n                  children: /*#__PURE__*/_jsx(\"button\", {\n                    className: \"bg-blueGray-800 text-white active:bg-blueGray-600 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full ease-linear transition-all duration-150\",\n                    type: \"button\",\n                    onClick: signInPatient,\n                    children: \"Generate OTP\"\n                  })\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  children: /*#__PURE__*/_jsx(\"label\", {\n                    className: \"flex items-center cursor-pointer justify-center\",\n                    children: /*#__PURE__*/_jsxs(\"span\", {\n                      className: \"ml-2 text-sm font-semibold text-blueGray-600\",\n                      children: [\"Not received OTP ? \", \" \", /*#__PURE__*/_jsx(\"span\", {\n                        className: \"text-lightBlue-500\",\n                        onClick: signInPatient,\n                        children: \"Resend OTP\"\n                      })]\n                    })\n                  })\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"relative w-full mb-3\",\n                  children: [/*#__PURE__*/_jsx(\"label\", {\n                    className: \"block uppercase text-blueGray-600 text-xs font-bold mb-2\",\n                    children: \"Enter OTP\"\n                  }), /*#__PURE__*/_jsx(\"input\", {\n                    type: \"number\",\n                    value: otp,\n                    onChange: e => setOtp(e.target.value),\n                    className: \"border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150\",\n                    placeholder: \"OTP\"\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"text-center mt-6\",\n                  children: /*#__PURE__*/_jsx(\"button\", {\n                    className: \"bg-blueGray-800 text-white active:bg-blueGray-600 text-sm font-bold uppercase px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full ease-linear transition-all duration-150\",\n                    type: \"button\",\n                    onClick: onSubmitOtp,\n                    children: \"Verify OTP & Book Appointment\"\n                  })\n                })]\n              })\n            })]\n          })\n        })\n      })\n    })\n  });\n}\nPatientLogin.layout = LoginLayout;","map":null,"metadata":{},"sourceType":"module"}